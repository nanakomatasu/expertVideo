"use strict";const e=require("../../common/vendor.js"),h=require("../../config/index.js"),P=require("../../store/user.js"),u=require("../../request/api.js");if(!Array){const l=e.resolveComponent("uv-icon"),i=e.resolveComponent("P"),t=e.resolveComponent("tn-region-picker"),c=e.resolveComponent("tn-picker");(l+i+t+c)()}const x=()=>"../../uni_modules/uv-icon/components/uv-icon/uv-icon.js",y=()=>"../../uni_modules/tuniaoui-vue3/components/region-picker/src/region-picker.js",I=()=>"../../uni_modules/tuniaoui-vue3/components/picker/src/picker.js";Math||(x+y+I)();const w={__name:"editUserInfo",setup(l){const i=P.useUserStore();e.onLoad(()=>{k()});const t=e.ref(""),c=e.ref(!1),p=e.ref(!1),v=e.ref("男"),n=e.ref(["河南省","郑州市","金水区"]),r=e.ref("");e.ref("");const d=()=>{e.index.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:o=>{const _=o.tempFilePaths[0];e.index.uploadFile({url:h.SERVERTAPI+u.upload,filePath:_,name:"file",formData:{uid:i.uid,token:i.token},success:a=>{const s=JSON.parse(a.data);if(s.code!=1){e.index.showToast({icon:"none",title:s.info});return}e.index.showToast({icon:"success",title:"上传成功"}),t.value=s.data.urlImg}})}})},m=()=>{e.index.navigateBack()},f=()=>{c.value=!0},g=()=>{u.changeUserInfoApi({uid:i.uid,token:i.token,nickname:r.value,headimg:t.value,region_province:n.value[0],region_city:n.value[1],region_area:n.value[2]}).then(o=>{o.code==1&&(e.index.showToast({icon:"success",title:"修改成功"}),setTimeout(()=>{e.index.navigateBack()},500))})},k=()=>{u.userInfoApi({uid:i.uid,token:i.token}).then(o=>{r.value=o.data.nickname,t.value=o.data.headimg,o.data.region_province!=""&&(n.value[0]=o.data.region_province,n.value[1]=o.data.region_city,n.value[2]=o.data.region_area)})};return(o,_)=>({a:e.o(m),b:e.p({name:"arrow-left",color:"#fff"}),c:e.p({name:"camera-fill",size:"50rpx",color:"#fff"}),d:e.o(d),e:t.value,f:r.value,g:e.o(a=>r.value=a.detail.value),h:e.t(n.value[0]),i:e.t(n.value[1]),j:e.t(n.value[2]),k:e.p({name:"arrow-down-fill"}),l:e.o(f),m:e.o(g),n:e.o(a=>n.value=a),o:e.o(a=>c.value=a),p:e.p({modelValue:n.value,open:c.value}),q:e.o(a=>v.value=a),r:e.o(a=>p.value=a),s:e.p({data:o.pickerData,modelValue:v.value,open:p.value})})}},T=e._export_sfc(w,[["__scopeId","data-v-2fe83fbe"]]);wx.createPage(T);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/edit/editUserInfo.js.map
