"use strict";const e=require("../../common/vendor.js"),f=require("../../common/assets.js"),g=require("../../request/api.js"),m=require("../../store/user.js");Array||e.resolveComponent("uv-icon")();const p=()=>"../../uni_modules/uv-icon/components/uv-icon/uv-icon.js";Math||p();const x={__name:"login",setup(r){const a=m.useUserStore(),o=e.ref(0),s=e.ref(1);e.ref(""),e.ref(""),e.ref(""),e.ref(!1);const c=e.ref(""),u=e.ref("");e.onLoad(n=>{if(n.q){let t=decodeURIComponent(n.q);n.value=t,e.index.__f__("log","at pages/account/login.vue:51",n.value);const i=t.match(/[?&]inviter=(\d+)/);c.value=i?i[1]:"",e.index.__f__("log","at pages/account/login.vue:54",c.value)}});const l=()=>{o.value==0?o.value=1:o.value=0};e.ref([{id:1,title:"登录"},{id:2,title:"注册"}]);const d=()=>{e.index.navigateTo({url:"/pages/agreement/privacyPolicy"})},v=()=>{e.index.navigateTo({url:"/pages/agreement/userAgreement"})},_=()=>{if(o.value==0){e.index.showToast({icon:"none",title:"请阅读并同意《用户协议》和《隐私政策》"});return}e.index.showLoading({title:"登陆中",mask:!1}),e.index.login({success(n){g.loginApi({code:n.code,pid:c.value}).then(t=>{if(t.code!=1){e.index.showToast({icon:"none",title:t.info});return}else a.setUid(t.data.id),a.setToken(t.data.token),a.setUserInfo(t.data),e.index.showToast({icon:"success",title:"登录成功"}),setTimeout(()=>{e.index.switchTab({url:"/pages/tabbar/index"})},500)})}})};return(n,t)=>e.e({a:e.t(s.value==1?"欢迎登录":"欢迎注册"),b:e.t(u.value),c:f._imports_0$3,d:s.value==1},s.value==1?{e:e.o(_)}:{},{f:o.value==1},o.value==1?{g:e.p({name:"checkmark",size:"20rpx",color:"#fff"})}:{},{h:e.o(l),i:e.n(o.value==1?"check-status":""),j:e.o(v),k:e.o(d)})}},h=e._export_sfc(x,[["__scopeId","data-v-1095b067"]]);wx.createPage(h);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/account/login.js.map
