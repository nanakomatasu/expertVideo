"use strict";const t=require("../common/vendor.js"),d=require("../config/index.js"),u=(n={})=>new Promise((c,i)=>{const a=t.index.getStorageSync("token"),s={"Content-Type":"application/json",...n.header};a&&(s.Authorization=`Bearer ${a}`),t.index.request({url:d.SERVERTAPI+n.url,method:n.method||"GET",data:n.data||{},timeout:1e5,header:s,success:e=>{if(e.statusCode===200){if(e.data.code==300){t.index.showModal({title:"请先去登陆吧",success(o){o.confirm&&t.index.navigateTo({url:"/pages/account/login"})}});return}if(e.data.code==100){t.index.showModal({title:"请先去登陆吧",success(o){o.confirm&&t.index.navigateTo({url:"/pages/account/login"})}});return}if(e.code==0){t.index.showToast({icon:"none",title:e.info});return}c(e.data)}else e.statusCode===401?t.index.showModal({title:"请先去登陆吧",success(o){o.confirm&&t.index.navigateTo({url:"/pages/account/login"})}}):t.index.showToast({icon:"none",title:`请求失败，状态码：${e.statusCode}`}),i(e)},fail:e=>{t.index.showToast({icon:"none",title:"网络请求失败"}),t.index.__f__("log","at request/request.js:89",d.SERVERTAPI+n.url,e),i(e)}})});exports.request=u;
//# sourceMappingURL=../../.sourcemap/mp-weixin/request/request.js.map
