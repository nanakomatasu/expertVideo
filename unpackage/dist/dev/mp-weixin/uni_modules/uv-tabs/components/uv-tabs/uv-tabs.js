"use strict";const o=require("../../../uv-ui-tools/libs/mixin/mpMixin.js"),u=require("../../../uv-ui-tools/libs/mixin/mixin.js"),c=require("../../../uv-badge/components/uv-badge/props.js"),b=require("./props.js"),n=require("../../../../common/vendor.js"),g={name:"uv-tabs",emits:["click","change"],mixins:[o.mpMixin,u.mixin,b.props],data(){return{firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}},watch:{current:{immediate:!0,handler(e,s){e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick(()=>{this.resize()}))}},list(){this.$nextTick(()=>{this.resize()})}},computed:{textStyle(){return e=>{const s={},i=e==this.innerCurrent?this.$uv.addStyle(this.activeStyle):this.$uv.addStyle(this.inactiveStyle);return this.list[e].disabled&&(s.color="#c8c9cc"),this.$uv.deepMerge(i,s)}},propsBadge(){return c.props}},async mounted(){this.init()},methods:{setLineLeft(){const e=this.list[this.innerCurrent];if(!e)return;let s=this.list.slice(0,this.innerCurrent).reduce((a,l)=>a+l.rect.width,0),i=this.$uv.getPx(this.lineWidth);this.$uv.test.number(this.lineWidth)&&this.$uv.unit&&(i=this.$uv.getPx(`${this.lineWidth}${this.$uv.unit}`)),this.lineOffsetLeft=s+(e.rect.width-i)/2,this.firstTime&&setTimeout(()=>{this.firstTime=!1},20)},animation(e,s=0){},clickHandler(e,s){this.$emit("click",{...e,index:s}),!e.disabled&&(this.innerCurrent!=s&&this.$emit("change",{...e,index:s}),this.innerCurrent=s,this.$nextTick(()=>{this.resize()}))},init(){this.$uv.sleep().then(()=>{this.resize()})},setScrollLeft(){const e=this.list[this.innerCurrent],s=this.list.slice(0,this.innerCurrent).reduce((l,r)=>l+r.rect.width,0),i=this.$uv.sys().windowWidth;let a=s-(this.tabsRect.width-e.rect.width)/2-(i-this.tabsRect.right)/2+this.tabsRect.left/2;a=Math.min(a,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,a)},resize(){this.list.length!==0&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then(([e,s=[]])=>{this.tabsRect=e,this.scrollViewWidth=0,s.map((i,a)=>{this.scrollViewWidth+=i.width,this.list[a].rect=i}),this.setLineLeft(),this.setScrollLeft()})},getTabsRect(){return new Promise(e=>{this.queryRect("uv-tabs__wrapper__scroll-view").then(s=>e(s))})},getAllItemRect(){return new Promise(e=>{const s=this.list.map((i,a)=>this.queryRect(`uv-tabs__wrapper__nav__item-${a}`,!0));Promise.all(s).then(i=>e(i))})},queryRect(e,s){return new Promise(i=>{this.$uvGetRect(`.${e}`).then(a=>{i(a)})})}}};Array||n.resolveComponent("uv-badge")();const p=()=>"../../../uv-badge/components/uv-badge/uv-badge.js";Math||p();function _(e,s,i,a,l,r){return{a:n.f(e.list,(t,d,h)=>({a:n.t(t[e.keyName]),b:n.n(t.disabled&&"uv-tabs__wrapper__nav__item__text--disabled"),c:n.s(r.textStyle(d)),d:"fd5fcf14-0-"+h,e:n.p({show:!!(t.badge&&(t.badge.show||t.badge.isDot||t.badge.value)),isDot:t.badge&&t.badge.isDot||r.propsBadge.isDot,value:t.badge&&t.badge.value||r.propsBadge.value,max:t.badge&&t.badge.max||r.propsBadge.max,type:t.badge&&t.badge.type||r.propsBadge.type,showZero:t.badge&&t.badge.showZero||r.propsBadge.showZero,bgColor:t.badge&&t.badge.bgColor||r.propsBadge.bgColor,color:t.badge&&t.badge.color||r.propsBadge.color,shape:t.badge&&t.badge.shape||r.propsBadge.shape,numberType:t.badge&&t.badge.numberType||r.propsBadge.numberType,inverted:t.badge&&t.badge.inverted||r.propsBadge.inverted,customStyle:"margin-left: 4px;"}),f:d,g:n.o(v=>r.clickHandler(t,d),d),h:`uv-tabs__wrapper__nav__item-${d}`,i:n.n(`uv-tabs__wrapper__nav__item-${d}`),j:n.n(t.disabled&&"uv-tabs__wrapper__nav__item--disabled")})),b:n.s({flex:e.scrollable?"":1}),c:n.s(e.$uv.addStyle(e.itemStyle)),d:n.s({width:e.$uv.addUnit(e.lineWidth),transform:`translate(${l.lineOffsetLeft}px)`,transitionDuration:`${l.firstTime?0:e.duration}ms`,height:l.firstTime?0:e.$uv.addUnit(e.lineHeight),background:e.lineColor,backgroundSize:e.lineBgSize}),e:e.scrollable?"":1,f:e.scrollable,g:l.scrollLeft,h:n.s(e.$uv.addStyle(e.customStyle))}}const f=n._export_sfc(g,[["render",_],["__scopeId","data-v-fd5fcf14"]]);wx.createComponent(f);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js.map
