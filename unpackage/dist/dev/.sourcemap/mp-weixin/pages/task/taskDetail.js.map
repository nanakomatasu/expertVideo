{"version":3,"file":"taskDetail.js","sources":["pages/task/taskDetail.vue","../../HbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcdGFza1x0YXNrRGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"navigation-bar navigation-bar-background\">\r\n\t\t<view class=\"navgation-bar-content text-color\">\r\n\t\t\t<view style=\"position: absolute; left: 32rpx; top: 11rpx;\"> <uv-icon name=\"arrow-left\" color=\"#fff\"\r\n\t\t\t\t\t@click=\"backPages\"></uv-icon></view>创客计划\r\n\t\t</view>\r\n\t</view>\r\n\t<view class=\"user-card center-box\">\r\n\t\t<view class=\"user-avatar\">\r\n\t\t\t<image :src=\"userInfo.headimg\" mode=\"aspectFill\"></image>\r\n\t\t</view>\r\n\t\t<view class=\"user-info\">\r\n\t\t\t<view class=\"user-nick\">{{userInfo.nickname}}</view>\r\n\t\t\t<view class=\"user-lable\">\r\n\t\t\t\t<view class=\"user-identity user-lable-item\" v-if=\"userInfo.ievel == 0\">身份：普通用户\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"user-level user-lable-item\" v-if=\"userInfo.ievel == 1\">等级：创客</view>\r\n\t\t\t\t<view class=\"user-level user-lable-item\" v-if=\"userInfo.ievel == 2\">身份：推客</view>\r\n\t\t\t\t<view class=\"user-level user-lable-item\" v-if=\"userInfo.ievel == 3\">身份：团长</view>\r\n\t\t\t\t<view class=\"user-level user-lable-item\" v-if=\"userInfo.ievel == 4\">身份：服务商</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<view class=\"tips-content center-box\">\r\n\t\t<view class=\"tips-lable\">\r\n\t\t\tTips\r\n\t\t</view>\r\n\t\t<!-- \t\t<view class=\"tips-content-text\">第4个购买任务完成(财富外交官)</view> -->\r\n\t</view>\r\n\t<view class=\"task-content center-box\">\r\n\t\t<tn-title title=\"当前步骤\" mode=\"vLine\" assist-color=\"#FAA82C\" color=\"#FAA82C\" size=\"lg\" />\r\n\t\t<view class=\"create-order\">\r\n\t\t\t橱窗下单\r\n\t\t\t<view class=\"nav-store\" @click=\"openVideo\">\r\n\t\t\t\t<uv-icon name=\"shopping-cart\" color=\"#fff\" size=\"40rpx\"></uv-icon> 进店下单\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"task-flow\">\r\n\t\t\t<view class=\"task-flow-tips\">\r\n\t\t\t\t<view class=\"tips-icon\">\r\n\t\t\t\t\t<image src=\"/static/task/taskFlowTips.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tips-text\">注意</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"task-flow-list\">\r\n\t\t\t\t<view class=\"task-flow-item\" v-for=\"(item, index) in taskFlowSteps\">\r\n\t\t\t\t\t<view class=\"serial-number\">{{index + 1}}</view>{{item.title}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<uv-input style=\"background-color: #F6F6F6; border-radius: 8rpx 8rpx 8rpx 8rpx;\" placeholder=\"请输入订单号\"\r\n\t\t\t\tv-model=\"orderSn\"></uv-input>\r\n\t\t\t<view class=\"next-task\" @click=\"completeTask\">已完成，下个任务</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '../../store/user';\r\n\r\n\timport {\r\n\t\tuserInfoApi,\r\n\t\ttaskListApi,\r\n\t\tcompleteTaskApi\r\n\t} from '../../request/api';\r\n\r\n\timport {\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\r\n\r\n\tonLoad(() => {\r\n\t\tgetUserInfo()\r\n\t})\r\n\r\n\tconst userStore = useUserStore()\r\n\r\n\tconst orderSn = ref(\"\")\r\n\r\n\tconst userInfo = ref({})\r\n\r\n\tconst successTaskCount = ref(0)\r\n\r\n\tconst taskFlowSteps = ref([{\r\n\t\t\tid: 1,\r\n\t\t\ttitle: \"进入橱窗仅需要购买一个商品\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\ttitle: \"收货人姓名和电话必须与创客系统一致\"\r\n\t\t}\r\n\t])\r\n\tconst backPages = () => {\r\n\t\tuni.navigateBack()\r\n\t}\r\n\tconst openVideo = () => {\r\n\t\twx.openChannelsUserProfile({\r\n\t\t\t// finderUserName: 'sph7qekAjBcxbjN',\r\n\t\t\tfinderUserName: userStore.taskVideoCode,\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t},\r\n\t\t\tfail(res) {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst getUserInfo = () => {\r\n\t\tuserInfoApi({\r\n\t\t\tuid: userStore.uid,\r\n\t\t\ttoken: userStore.token\r\n\t\t}).then(res => {\r\n\t\t\tuserInfo.value = res.data\r\n\t\t})\r\n\t}\r\n\r\n\tconst getTaskList = () => {\r\n\t\ttaskListApi({\r\n\t\t\tuid: userStore.uid,\r\n\t\t\ttoken: userStore.token\r\n\t\t}).then(res => {\r\n\t\t\tcalcTask(res.data)\r\n\t\t})\r\n\t}\r\n\r\n\tconst calcTask = (array) => {\r\n\t\tif (array.length == 0) {\r\n\t\t\tsuccessTaskCount.value = 0\r\n\t\t} else {\r\n\t\t\tconst filteredArray = array.filter(item => item.order_status && item.order_status === 2);\r\n\t\t\tsuccessTaskCount.value = filteredArray.length;\r\n\t\t}\r\n\t}\r\n\r\n\tconst completeTask = () => {\r\n\t\tcompleteTaskApi({\r\n\t\t\tuid: userStore.uid,\r\n\t\t\ttoken: userStore.token,\r\n\t\t\twindow_person_id: userStore.orderNumber,\r\n\t\t\twechat_order_number: orderSn.value\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: res.info\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\ttitle: '提交成功'\r\n\t\t\t})\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t}, 500)\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.navigation-bar {\r\n\t\toverflow: hidden;\r\n\t\twidth: 100%;\r\n\t\theight: 196rpx;\r\n\r\n\t\t.navgation-bar-content {\r\n\t\t\tposition: relative;\r\n\t\t\tmargin-top: 88rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 108rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.text-color {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t}\r\n\r\n\t.user-card {\r\n\t\tpadding: 32rpx 24rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 24rpx;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\r\n\t\t.user-avatar {\r\n\t\t\twidth: 136rpx;\r\n\t\t\theight: 136rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.user-info {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tmargin-left: 16rpx;\r\n\r\n\t\t\t.user-nick {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #1A1A1A;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t.user-lable {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tmargin-top: 44rpx;\r\n\r\n\t\t\t\t.user-lable-item {\r\n\t\t\t\t\tpadding: 4rpx 16rpx;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground-color: #FAA82C;\r\n\t\t\t\t\tborder-radius: 26rpx 26rpx 26rpx 26rpx;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.user-level {\r\n\t\t\t\t\tmargin-left: 22rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.user-identity {\r\n\t\t\t\tpadding: 4rpx 16rpx;\r\n\t\t\t\tbackground-color: #FAA82C;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tborder-radius: 26rpx 26rpx 26rpx 26rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.tips-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #1A1A1A;\r\n\t\tmargin-top: 32rpx;\r\n\r\n\t\t.tips-lable {\r\n\t\t\tpadding: 4rpx 32rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground-color: #FAA82C;\r\n\t\t\tborder-radius: 6rpx 6rpx 6rpx 6rpx;\r\n\t\t\tmargin-right: 24rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.task-content {\r\n\t\tmargin-top: 24rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 32rpx;\r\n\r\n\t\t.create-order {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: #1A1A1A;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tmargin-top: 48rpx;\r\n\r\n\t\t\t.nav-store {\r\n\t\t\t\tmargin-top: 24rpx;\r\n\t\t\t\twidth: 208rpx;\r\n\t\t\t\theight: 64rpx;\r\n\t\t\t\tbackground-color: #FAA82C;\r\n\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.task-flow {\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t.task-flow-tips {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-top: 48rpx;\r\n\r\n\t\t\t\t.tips-icon {\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tips-text {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tcolor: #1A1A1A;\r\n\t\t\t\t\tmargin-left: 16rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.task-flow-list {\r\n\t\t\t\tmargin-top: 32rpx;\r\n\r\n\t\t\t\t.task-flow-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tmargin-bottom: 28rpx;\r\n\r\n\t\t\t\t\t.serial-number {\r\n\t\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tbackground-color: #FAA82C;\r\n\t\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.next-task {\r\n\t\t\t\twidth: 524rpx;\r\n\t\t\t\theight: 84rpx;\r\n\t\t\t\tline-height: 84rpx;\r\n\t\t\t\tbackground: linear-gradient(90deg, #FFA143 0%, #FAA82C 100%);\r\n\t\t\t\tmargin: 48rpx 0 0 50%;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\tborder-radius: 88rpx 88rpx 88rpx 88rpx;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/work/达人h5/pages/task/taskDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","getUserInfo","userStore","useUserStore","orderSn","ref","userInfo","taskFlowSteps","backPages","uni","openVideo","wx","res","userInfoApi","completeTask","completeTaskApi","MiniProgramPage"],"mappings":"giBA2ECA,EAAAA,OAAO,IAAM,CACZC,EAAa,CACf,CAAE,EAED,MAAMC,EAAYC,EAAAA,aAAc,EAE1BC,EAAUC,EAAG,IAAC,EAAE,EAEhBC,EAAWD,EAAG,IAAC,EAAE,EAEEA,EAAAA,IAAI,CAAC,EAE9B,MAAME,EAAgBF,EAAAA,IAAI,CAAC,CACzB,GAAI,EACJ,MAAO,eACP,EACD,CACC,GAAI,EACJ,MAAO,mBACP,CACH,CAAE,EACKG,EAAY,IAAM,CACvBC,EAAAA,MAAI,aAAc,CAClB,EACKC,EAAY,IAAM,CACvBC,EAAAA,KAAG,wBAAwB,CAE1B,eAAgBT,EAAU,cAC1B,QAAQU,EAAK,CACZH,EAAAA,MAAA,MAAA,MAAA,mCAAYG,CAAG,CACf,EACD,KAAKA,EAAK,CACTH,EAAAA,MAAA,MAAA,MAAA,mCAAYG,CAAG,CACf,CACJ,CAAG,CACD,EAEKX,EAAc,IAAM,CACzBY,cAAY,CACX,IAAKX,EAAU,IACf,MAAOA,EAAU,KACpB,CAAG,EAAE,KAAKU,GAAO,CACdN,EAAS,MAAQM,EAAI,IACxB,CAAG,CACD,EAoBKE,EAAe,IAAM,CAC1BC,kBAAgB,CACf,IAAKb,EAAU,IACf,MAAOA,EAAU,MACjB,iBAAkBA,EAAU,YAC5B,oBAAqBE,EAAQ,KAChC,CAAG,EAAE,KAAKQ,GAAO,CACd,GAAIA,EAAI,MAAQ,EAAG,CAClBH,EAAAA,MAAI,UAAU,CACb,KAAM,OACN,MAAOG,EAAI,IAChB,CAAK,EACD,MACA,CACDH,EAAAA,MAAI,UAAU,CACb,KAAM,UACN,MAAO,MACX,CAAI,EACD,WAAW,IAAM,CAChBA,EAAAA,MAAI,aAAc,CAClB,EAAE,GAAG,CACT,CAAG,CACD,2nBChKF,GAAG,WAAWO,CAAe"}