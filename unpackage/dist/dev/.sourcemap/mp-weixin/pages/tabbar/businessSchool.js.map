{"version":3,"file":"businessSchool.js","sources":["pages/tabbar/businessSchool.vue","../../HbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGFiYmFyL2J1c2luZXNzU2Nob29sLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"content-box\">\r\n\t\t<view class=\"navigation-bar navigation-bar-background\">\r\n\t\t\t<view class=\"navgation-bar-content text-color\">\r\n\t\t\t\t商学院\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"search-box center-box\">\r\n\t\t\t<view class=\"search-content\">\r\n\t\t\t\t<tn-search-box v-model=\"searchValue\" shape=\"square\" @search=\"searchBtnClickEvent\" :border=\"false\"\r\n\t\t\t\t\tsearch-button-text-color=\"#FFFFFF\" search-button-bg-color=\"#FAA82C\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"switch-tab-content\">\r\n\t\t\t<view class=\"switch-item\" v-for=\"item in switchList\" :key=\"item.id\"\r\n\t\t\t\t:class=\"[item.id == switchId ? 'select-switch-item' : '']\" @click=\"changeSwitchId(item)\">\r\n\t\t\t\t{{item.title}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"course-list\">\r\n\t\t\t<tn-empty mode=\"data\" v-if=\"courseList.length == 0\"></tn-empty>\r\n\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-view\" refresher-enabled=\"true\" @refresherrefresh=\"handleRefresh\"\r\n\t\t\t\t:refresher-triggered=\"triggered\" scrolltolower=\"handleScrollTolower\" v-if=\"courseList.length > 0\">\r\n\t\t\t\t<view class=\"course-item-content\">\r\n\t\t\t\t\t<view class=\"course-item\" v-for=\"item in courseList\" :key=\"item.id\" @click=\"navCourseDetail(item)\">\r\n\t\t\t\t\t\t<view class=\"course-cover\">\r\n\t\t\t\t\t\t\t<view class=\"play-icon\" v-if=\"hideStatus != '1'\"><uv-icon name=\"play-circle\"\r\n\t\t\t\t\t\t\t\t\tclass=\"play-icon\" size=\"50rpx\" color=\"#fff\" v-if=\"switchId == 2\"></uv-icon></view>\r\n\t\t\t\t\t\t\t<image :src=\"item.cover\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"course-title\">{{item.name}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '../../store/user'\r\n\timport {\r\n\t\tBusinessCollegeApi,\r\n\t\tgetTzt\r\n\t} from '../../request/api'\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app'\r\n\tonShow(() => {\r\n\t\tgetT()\r\n\t\tif (userStore.token == \"\") {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '请先去登陆吧',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: \"/pages/account/login\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t\tgetClassifyGods()\r\n\t})\r\n\tconst hideStatus = ref('1')\r\n\tconst userStore = useUserStore()\r\n\tconst switchId = ref(1)\r\n\tconst goodsPage = ref(1)\r\n\tconst triggered = ref(false)\r\n\tconst switchList = ref([])\r\n\tconst courseList = ref([])\r\n\tconst changeSwitchId = (item) => {\r\n\t\tswitchId.value = item.id\r\n\t\tgetClassifyGods()\r\n\t}\r\n\r\n\tconst searchBtnClickEvent = (value) => {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.log('searchBtnClickEvent', value)\r\n\t\tBusinessCollegeApi({\r\n\t\t\tuid: userStore.uid,\r\n\t\t\ttoken: userStore.token,\r\n\t\t\ttype: switchId.value,\r\n\t\t\tpage: goodsPage.value,\r\n\t\t\tname: value\r\n\t\t}).then(res => {\r\n\t\t\tgoodsPage.value == 1\r\n\t\t\tcourseList.value = res.data\r\n\t\t\ttriggered.value = false\r\n\t\t})\r\n\t}\r\n\tconst navCourseDetail = (item) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: \"/pages/course/courseDetail?id=\" + item.id + \"&type=\" + switchId.value\r\n\t\t})\r\n\t}\r\n\tconst getClassifyGods = () => {\r\n\t\tBusinessCollegeApi({\r\n\t\t\tuid: userStore.uid,\r\n\t\t\ttoken: userStore.token,\r\n\t\t\ttype: switchId.value,\r\n\t\t\tpage: goodsPage.value,\r\n\t\t}).then(res => {\r\n\t\t\tif (goodsPage.value > 1) {\r\n\t\t\t\tres.data.forEach(i => {\r\n\t\t\t\t\tcourseList.value.push(i)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tcourseList.value = res.data\r\n\t\t\t}\r\n\t\t\tif (res.data.length == 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: '暂无更多内容了'\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t\ttriggered.value = false\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleRefresh = () => {\r\n\t\tif (!triggered.value) {\r\n\t\t\ttriggered.value = true;\r\n\t\t\tgoodsPage.value = 1\r\n\t\t\tgetClassifyGodss()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleScrollTolower = () => {\r\n\t\tgoodsPage.value++\r\n\t\tgetClassifyGodss()\r\n\t}\r\n\r\n\tconst getT = () => {\r\n\t\tgetTzt().then(res => {\r\n\t\t\thideStatus.value = res.data\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (res.data !== '1') {\r\n\t\t\t\tswitchList.value = [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\ttitle: \"图文\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\ttitle: \"视频\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t} else {\r\n\t\t\t\tswitchList.value = [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\ttitle: \"图文\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\ttitle: \"教程\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t\t// if (res.data.content != '1') {\r\n\t\t\t// \tconsole.log('111');\r\n\t\t\t// \tswitchList.value = []\r\n\t\t\t// \tswitchList.value.push({\r\n\t\t\t// \t\tid: 1,\r\n\t\t\t// \t\ttitle: \"图文\"\r\n\t\t\t// \t})\r\n\t\t\t// \tswitchList.value.push({\r\n\t\t\t// \t\tid: 2,\r\n\t\t\t// \t\ttitle: \"视频\"\r\n\t\t\t// \t})\r\n\t\t\t// \t// switchList.value = [{\r\n\t\t\t// \t// \t\tid: 1,\r\n\t\t\t// \t// \t\ttitle: \"图文\"\r\n\t\t\t// \t// \t},\r\n\t\t\t// \t// \t{\r\n\t\t\t// \t// \t\tid: 2,\r\n\t\t\t// \t// \t\ttitle: \"视频\"\r\n\t\t\t// \t// \t}\r\n\t\t\t// \t// ]\r\n\t\t\t// }\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.navigation-bar {\r\n\t\toverflow: hidden;\r\n\t\twidth: 100%;\r\n\t\theight: 196rpx;\r\n\r\n\t\t.navgation-bar-content {\r\n\t\t\tmargin-top: 88rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 108rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.text-color {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t}\r\n\r\n\t.search-box {\r\n\t\tmargin-top: 8rpx;\r\n\t\tpadding: 8rpx 0;\r\n\t\twidth: calc(100% - 64rpx);\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\r\n\t\t.search-content {\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #F6F6F6;\r\n\t\t}\r\n\t}\r\n\r\n\t.switch-tab-content {\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: calc(100% - 64rpx);\r\n\t\theight: 104rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin: 8rpx 0 0 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tpadding: 10rpx 16rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tborder-radius: 8rpx;\r\n\r\n\t\t.switch-item {\r\n\t\t\tcursor: pointer;\r\n\t\t\twidth: 49%;\r\n\t\t\theight: 84rpx;\r\n\t\t\tline-height: 84rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: #1A1A1A;\r\n\t\t}\r\n\r\n\t\t.select-switch-item {\r\n\t\t\tbackground-color: #FFD293;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t}\r\n\r\n\t.course-list {\r\n\t\twidth: calc(100% - 64rpx);\r\n\t\theight: 70vh;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin: 16rpx 0 0 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tborder-radius: 8rpx;\r\n\r\n\t\t.scroll-view {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\r\n\t\t\t.course-item-content {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-content: flex-start;\r\n\r\n\t\t\t\t.course-item {\r\n\t\t\t\t\twidth: 49%;\r\n\t\t\t\t\tpadding: 12rpx 12rpx;\r\n\r\n\t\t\t\t\t.course-cover {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\theight: 374rpx;\r\n\t\t\t\t\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\r\n\t\t\t\t\t\t.play-icon {\r\n\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\t\t\ttransform: translate(-50%, -50%);\r\n\t\t\t\t\t\t\tz-index: 2;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.course-title {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tpadding: 0 8rpx;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tcolor: #1A1A1A;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/work/达人h5/pages/tabbar/businessSchool.vue'\nwx.createPage(MiniProgramPage)"],"names":["onShow","getT","userStore","uni","res","getClassifyGods","hideStatus","ref","useUserStore","switchId","goodsPage","triggered","switchList","courseList","changeSwitchId","item","searchBtnClickEvent","value","BusinessCollegeApi","navCourseDetail","handleRefresh","getTzt","MiniProgramPage"],"mappings":"khBAqDCA,EAAAA,OAAO,IAAM,CACZC,EAAM,EACFC,EAAU,OAAS,IACtBC,EAAAA,MAAI,UAAU,CACb,MAAO,SACP,QAAQC,EAAK,CACRA,EAAI,SACPD,EAAAA,MAAI,WAAW,CACd,IAAK,sBACZ,CAAO,CAGF,CACL,CAAI,EAGFE,EAAiB,CACnB,CAAE,EACD,MAAMC,EAAaC,EAAG,IAAC,GAAG,EACpBL,EAAYM,EAAAA,aAAc,EAC1BC,EAAWF,EAAG,IAAC,CAAC,EAChBG,EAAYH,EAAG,IAAC,CAAC,EACjBI,EAAYJ,EAAG,IAAC,EAAK,EACrBK,EAAaL,EAAG,IAAC,EAAE,EACnBM,EAAaN,EAAG,IAAC,EAAE,EACnBO,EAAkBC,GAAS,CAChCN,EAAS,MAAQM,EAAK,GACtBV,EAAiB,CACjB,EAEKW,EAAuBC,GAAU,CAEtCd,EAAAA,MAAA,MAAA,MAAA,wCAAY,sBAAuBc,CAAK,EACxCC,qBAAmB,CAClB,IAAKhB,EAAU,IACf,MAAOA,EAAU,MACjB,KAAMO,EAAS,MACf,KAAMC,EAAU,MAChB,KAAMO,CACT,CAAG,EAAE,KAAKb,GAAO,CACdM,EAAU,OAAS,EACnBG,EAAW,MAAQT,EAAI,KACvBO,EAAU,MAAQ,EACrB,CAAG,CACD,EACKQ,EAAmBJ,GAAS,CACjCZ,EAAAA,MAAI,WAAW,CACd,IAAK,iCAAmCY,EAAK,GAAK,SAAWN,EAAS,KACzE,CAAG,CACD,EACKJ,EAAkB,IAAM,CAC7Ba,qBAAmB,CAClB,IAAKhB,EAAU,IACf,MAAOA,EAAU,MACjB,KAAMO,EAAS,MACf,KAAMC,EAAU,KACnB,CAAG,EAAE,KAAKN,GAAO,CACVM,EAAU,MAAQ,EACrBN,EAAI,KAAK,QAAQ,GAAK,CACrBS,EAAW,MAAM,KAAK,CAAC,CAC5B,CAAK,EAEDA,EAAW,MAAQT,EAAI,KAEpBA,EAAI,KAAK,QAAU,GACtBD,EAAAA,MAAI,UAAU,CACb,KAAM,OACN,MAAO,SACZ,CAAK,EAGFQ,EAAU,MAAQ,EACrB,CAAG,CACD,EAEKS,EAAgB,IAAM,CACtBT,EAAU,QACdA,EAAU,MAAQ,GAClBD,EAAU,MAAQ,EAClB,iBAAkB,EAEnB,EAOKT,EAAO,IAAM,CAClBoB,SAAQ,EAAC,KAAKjB,GAAO,CACpBE,EAAW,MAAQF,EAAI,KACvBD,EAAAA,MAAY,MAAA,MAAA,yCAAAC,CAAG,EACXA,EAAI,OAAS,IAChBQ,EAAW,MAAQ,CAAC,CAClB,GAAI,EACJ,MAAO,IACP,EACD,CACC,GAAI,EACJ,MAAO,IACP,CACD,EAEDA,EAAW,MAAQ,CAAC,CAClB,GAAI,EACJ,MAAO,IACP,EACD,CACC,GAAI,EACJ,MAAO,IACP,CACD,CAuBL,CAAG,CACD,isBC3LF,GAAG,WAAWU,CAAe"}