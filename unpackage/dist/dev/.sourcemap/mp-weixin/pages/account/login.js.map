{"version":3,"file":"login.js","sources":["pages/account/login.vue","../../HbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWNjb3VudC9sb2dpbi52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"login-title center-box\">\r\n\t\t{{typeStatus == 1 ? \"欢迎登录\" : \"欢迎注册\"}}\r\n\t</view>\r\n\t{{options}}\r\n\t<view class=\"login-avatar center-box\">\r\n\t\t<image src=\"/static/login/loginIcon.png\" mode=\"aspectFill\"></image>\r\n\t</view>\r\n\t<view class=\"login-btn login-center-box\" v-if=\"typeStatus == 1\" @click=\"getPhoneNumber\">\r\n\t\t微信一键登录{{devId}}\r\n\t</view>\r\n\t<view class=\"agreement-content login-center-box\">\r\n\t\t<view class=\"status-radios\" @click=\"changeAgreementStatus\"\r\n\t\t\t:class=\"[agreementStatus == 1 ? 'check-status' : '']\">\r\n\t\t\t<uv-icon name=\"checkmark\" size=\"20rpx\" color=\"#fff\" v-if=\"agreementStatus == 1\"></uv-icon>\r\n\t\t</view>\r\n\t\t<view class=\"agreement-text-content\">我已阅读并同意<span class=\"agreement-title\"\r\n\t\t\t\t@click=\"navUserAgreement\">《用户协议》</span>和<span class=\"agreement-title\" @click=\"navPrivacy\">《隐私政策》</span>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue';\r\n\timport {\r\n\t\tloginApi,\r\n\t\ttelnumberApi\r\n\t} from '../../request/api';\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '../../store/user';\r\n\tconst userStore = useUserStore()\r\n\tconst agreementStatus = ref(0)\r\n\tconst typeStatus = ref(1)\r\n\tconst accountNumber = ref(\"\")\r\n\tconst password = ref(\"\")\r\n\tconst inviteCode = ref(\"\")\r\n\tconst showPopup = ref(false)\r\n\tconst devId = ref(\"\")\r\n\tconst options = ref(\"\")\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app'\r\n\tonLoad((options) => {\r\n\t\tif (options.q) {\r\n\t\t\tlet codeStr = decodeURIComponent(options.q)\r\n\t\t\toptions.value = codeStr\r\n\t\t\tconsole.log(options.value);\r\n\t\t\tconst codeId = codeStr.match(/[?&]inviter=(\\d+)/)\r\n\t\t\tdevId.value = codeId ? codeId[1] : ''\r\n\t\t\tconsole.log(devId.value);\r\n\t\t}\r\n\t})\r\n\r\n\tconst changeAgreementStatus = () => {\r\n\t\tif (agreementStatus.value == 0) {\r\n\t\t\tagreementStatus.value = 1\r\n\t\t} else {\r\n\t\t\tagreementStatus.value = 0\r\n\t\t}\r\n\t}\r\n\tconst accountTypeList = ref([{\r\n\t\t\tid: 1,\r\n\t\t\ttitle: \"登录\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\ttitle: \"注册\"\r\n\t\t}\r\n\t])\r\n\tconst changeAccountType = (id) => {\r\n\t\ttypeStatus.value = id\r\n\t}\r\n\tconst navForget = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/account/forget'\r\n\t\t})\r\n\t}\r\n\tconst navPrivacy = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/agreement/privacyPolicy'\r\n\t\t})\r\n\t}\r\n\tconst navUserAgreement = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/agreement/userAgreement'\r\n\t\t})\r\n\t}\r\n\tconst getPhoneNumber = () => {\r\n\t\tif(agreementStatus.value == 0) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon:'none',\r\n\t\t\t\ttitle: '请阅读并同意《用户协议》和《隐私政策》'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '登陆中',\r\n\t\t\tmask: false\r\n\t\t})\r\n\t\tuni.login({\r\n\t\t\tsuccess(loginRes) {\r\n\t\t\t\tloginApi({\r\n\t\t\t\t\tcode: loginRes.code,\r\n\t\t\t\t\tpid: devId.value\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code != 1) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.info\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuserStore.setUid(res.data.id)\r\n\t\t\t\t\t\tuserStore.setToken(res.data.token)\r\n\t\t\t\t\t\tuserStore.setUserInfo(res.data)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\ttitle: '登录成功'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: '/pages/tabbar/index'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #F5F6F9;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.login-title {\r\n\t\tpadding-top: 48rpx;\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #FAA82C;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.login-avatar {\r\n\t\tmargin-top: 100rpx;\r\n\t\twidth: 320rpx;\r\n\t\theight: 320rpx;\r\n\t\tborder-radius: 50%;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.agreement-title {\r\n\t\tcolor: #007AFF;\r\n\t}\r\n\r\n\t// .account-number-input {\r\n\t// \tmargin-top: 76rpx;\r\n\t// }\r\n\r\n\t// .password-input {\r\n\t// \tmargin-top: 24rpx;\r\n\t// }\r\n\r\n\t// .invite-code-input {\r\n\t// \tmargin-top: 24rpx;\r\n\t// }\r\n\r\n\t.login-center-box {\r\n\t\twidth: calc(100% - 140rpx);\r\n\t\tmargin-left: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t}\r\n\r\n\t.forget-options {\r\n\t\ttext-align: right;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #737373;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.login-btn {\r\n\t\tmargin-top: 200rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #FAA82C;\r\n\t\ttext-align: center;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\t}\r\n\r\n\t.get-phone-btn {\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #FAA82C;\r\n\t\ttext-align: center;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\t}\r\n\r\n\t.register-btn {\r\n\t\tmargin-top: 48rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #FAA82C;\r\n\t\ttext-align: center;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 8rpx 8rpx 8rpx 8rpx;\r\n\t}\r\n\r\n\t.agreement-content {\r\n\t\tmargin-top: 16rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\r\n\t\t.status-radios {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 25rpx;\r\n\t\t\theight: 25rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tborder: 2rpx solid #00E000;\r\n\t\t}\r\n\r\n\t\t.check-status {\r\n\t\t\tbackground-color: #00E000;\r\n\t\t}\r\n\r\n\t\t.agreement-text-content {\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #737373;\r\n\t\t}\r\n\t}\r\n\r\n\t.change-login-register {\r\n\t\tmargin-top: 56rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #737373;\r\n\r\n\t\t.change-item {\r\n\t\t\twidth: 100rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.select-item {\r\n\t\t\tcolor: #FAA82C;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/work/达人h5/pages/account/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["userStore","useUserStore","agreementStatus","ref","typeStatus","devId","options","onLoad","codeStr","uni","codeId","changeAgreementStatus","navPrivacy","navUserAgreement","getPhoneNumber","loginRes","loginApi","res","MiniProgramPage"],"mappings":"sTAiCC,MAAMA,EAAYC,EAAAA,aAAc,EAC1BC,EAAkBC,EAAG,IAAC,CAAC,EACvBC,EAAaD,EAAG,IAAC,CAAC,EACFA,EAAAA,IAAI,EAAE,EACXA,EAAAA,IAAI,EAAE,EACJA,EAAAA,IAAI,EAAE,EACPA,EAAAA,IAAI,EAAK,EAC3B,MAAME,EAAQF,EAAG,IAAC,EAAE,EACdG,EAAUH,EAAG,IAAC,EAAE,EAKtBI,EAAM,OAAED,GAAY,CACnB,GAAIA,EAAQ,EAAG,CACd,IAAIE,EAAU,mBAAmBF,EAAQ,CAAC,EAC1CA,EAAQ,MAAQE,EAChBC,EAAA,MAAA,MAAA,MAAA,gCAAYH,EAAQ,KAAK,EACzB,MAAMI,EAASF,EAAQ,MAAM,mBAAmB,EAChDH,EAAM,MAAQK,EAASA,EAAO,CAAC,EAAI,GACnCD,EAAA,MAAA,MAAA,MAAA,gCAAYJ,EAAM,KAAK,CACvB,CACH,CAAE,EAED,MAAMM,EAAwB,IAAM,CAC/BT,EAAgB,OAAS,EAC5BA,EAAgB,MAAQ,EAExBA,EAAgB,MAAQ,CAEzB,EACuBC,EAAAA,IAAI,CAAC,CAC3B,GAAI,EACJ,MAAO,IACP,EACD,CACC,GAAI,EACJ,MAAO,IACP,CACH,CAAE,EASD,MAAMS,EAAa,IAAM,CACxBH,EAAAA,MAAI,WAAW,CACd,IAAK,gCACR,CAAG,CACD,EACKI,EAAmB,IAAM,CAC9BJ,EAAAA,MAAI,WAAW,CACd,IAAK,gCACR,CAAG,CACD,EACKK,EAAiB,IAAM,CAC5B,GAAGZ,EAAgB,OAAS,EAAG,CAC9BO,EAAAA,MAAI,UAAU,CACb,KAAK,OACL,MAAO,qBACX,CAAI,EACD,MACA,CACDA,EAAAA,MAAI,YAAY,CACf,MAAO,MACP,KAAM,EACT,CAAG,EACDA,EAAAA,MAAI,MAAM,CACT,QAAQM,EAAU,CACjBC,WAAS,CACR,KAAMD,EAAS,KACf,IAAKV,EAAM,KAChB,CAAK,EAAE,KAAKY,GAAO,CACd,GAAIA,EAAI,MAAQ,EAAG,CAClBR,EAAAA,MAAI,UAAU,CACb,KAAM,OACN,MAAOQ,EAAI,IAClB,CAAO,EACD,MACN,MACMjB,EAAU,OAAOiB,EAAI,KAAK,EAAE,EAC5BjB,EAAU,SAASiB,EAAI,KAAK,KAAK,EACjCjB,EAAU,YAAYiB,EAAI,IAAI,EAC9BR,EAAAA,MAAI,UAAU,CACb,KAAM,UACN,MAAO,MACd,CAAO,EACD,WAAW,IAAM,CAChBA,EAAAA,MAAI,UAAU,CACb,IAAK,qBACb,CAAQ,CACD,EAAE,GAAG,CAEZ,CAAK,CACD,CACJ,CAAG,CACD,sVCnIF,GAAG,WAAWS,CAAe"}