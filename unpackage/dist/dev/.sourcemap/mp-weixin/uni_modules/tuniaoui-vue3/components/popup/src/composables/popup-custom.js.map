{"version":3,"file":"popup-custom.js","sources":["uni_modules/tuniaoui-vue3/components/popup/src/composables/popup-custom.ts"],"sourcesContent":["import { computed, toRef } from 'vue'\nimport { useComponentColor, useNamespace } from '../../../../hooks'\nimport { formatDomSizeValue } from '../../../../utils'\n\nimport type { CSSProperties } from 'vue'\nimport type { PopupProps } from '../popup'\n\nexport const usePopupCustomStyle = (props: PopupProps) => {\n  const ns = useNamespace('popup')\n\n  // 当前模态框的zIndex\n  const zIndex = computed(() => Number(props.zIndex))\n\n  // 遮罩层的zIndex\n  const overlayZIndex = computed(() => zIndex.value - 1)\n\n  // 内容背景颜色\n  const [contentBgColorClass, contentBgColorStyle] = useComponentColor(\n    toRef(props, 'bgColor'),\n    'bg'\n  )\n\n  // 内容所属类\n  const popupContentClass = computed<string>(() => {\n    const cls: string[] = [ns.e('content')]\n\n    // 内容弹出位置\n    if (props.openDirection) cls.push(ns.em('content', props.openDirection))\n\n    // 如果是底部弹出，是否开启安全区域\n    if (props.openDirection === 'bottom' && props.safeAreaInsetBottom) {\n      cls.push('tn-u-safe-area')\n    }\n\n    // 内容背景颜色\n    if (contentBgColorClass.value) cls.push(contentBgColorClass.value)\n\n    return cls.join(' ')\n  })\n\n  // 内容所属样式\n  const popupContentStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n\n    // 设置背景颜色\n    if (contentBgColorStyle.value)\n      style.backgroundColor = contentBgColorStyle.value\n\n    // 设置圆角\n    if (props.radius) {\n      // 如果有设置圆角则条件overflow:hidden\n      style.overflow = 'hidden'\n      // 根据不同的弹出位置设置圆角\n      if (props.openDirection === 'center') {\n        style.borderRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'top') {\n        style.borderBottomLeftRadius = formatDomSizeValue(props.radius)\n        style.borderBottomRightRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'left') {\n        style.borderTopRightRadius = formatDomSizeValue(props.radius)\n        style.borderBottomRightRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'right') {\n        style.borderTopLeftRadius = formatDomSizeValue(props.radius)\n        style.borderBottomLeftRadius = formatDomSizeValue(props.radius)\n      }\n      if (props.openDirection === 'bottom') {\n        style.borderTopLeftRadius = formatDomSizeValue(props.radius)\n        style.borderTopRightRadius = formatDomSizeValue(props.radius)\n      }\n    }\n\n    // 设置距离顶部的距离\n    if (\n      props.top &&\n      (props.openDirection === 'top' ||\n        props.openDirection === 'left' ||\n        props.openDirection === 'right')\n    ) {\n      style.top = formatDomSizeValue(props.top, 'px')\n    }\n\n    // 根据不同的位置设置不同的宽度或高度\n    if (\n      props.width &&\n      (props.openDirection === 'left' ||\n        props.openDirection === 'right' ||\n        props.openDirection === 'center')\n    ) {\n      style.width = formatDomSizeValue(props.width)\n    }\n    if (\n      props.height &&\n      (props.openDirection === 'top' ||\n        props.openDirection === 'bottom' ||\n        props.openDirection === 'center')\n    ) {\n      style.height = formatDomSizeValue(props.height)\n    }\n\n    if (props.openDirection === 'left' || props.openDirection === 'right') {\n      if (props.top)\n        style.height = `calc(100% - ${formatDomSizeValue(props.top, 'px')})`\n    }\n\n    // 设置zIndex\n    style.zIndex = zIndex.value\n\n    return style\n  })\n\n  return {\n    ns,\n    zIndex,\n    overlayZIndex,\n    popupContentClass,\n    popupContentStyle,\n  }\n}\n"],"names":["usePopupCustomStyle","props","ns","useNamespace","zIndex","computed","overlayZIndex","contentBgColorClass","contentBgColorStyle","useComponentColor","toRef","popupContentClass","cls","popupContentStyle","style","formatDomSizeValue"],"mappings":"4UAOa,MAAAA,EAAuBC,GAAsB,CAClD,MAAAC,EAAKC,eAAa,OAAO,EAGzBC,EAASC,EAAAA,SAAS,IAAM,OAAOJ,EAAM,MAAM,CAAC,EAG5CK,EAAgBD,EAAAA,SAAS,IAAMD,EAAO,MAAQ,CAAC,EAG/C,CAACG,EAAqBC,CAAmB,EAAIC,EAAA,kBACjDC,EAAA,MAAMT,EAAO,SAAS,EACtB,IAAA,EAIIU,EAAoBN,EAAAA,SAAiB,IAAM,CAC/C,MAAMO,EAAgB,CAACV,EAAG,EAAE,SAAS,CAAC,EAGtC,OAAID,EAAM,eAAeW,EAAI,KAAKV,EAAG,GAAG,UAAWD,EAAM,aAAa,CAAC,EAGnEA,EAAM,gBAAkB,UAAYA,EAAM,qBAC5CW,EAAI,KAAK,gBAAgB,EAIvBL,EAAoB,OAAWK,EAAA,KAAKL,EAAoB,KAAK,EAE1DK,EAAI,KAAK,GAAG,CAAA,CACpB,EAGKC,EAAoBR,EAAAA,SAAwB,IAAM,CACtD,MAAMS,EAAuB,CAAA,EAG7B,OAAIN,EAAoB,QACtBM,EAAM,gBAAkBN,EAAoB,OAG1CP,EAAM,SAERa,EAAM,SAAW,SAEbb,EAAM,gBAAkB,WACpBa,EAAA,aAAeC,EAAAA,mBAAmBd,EAAM,MAAM,GAElDA,EAAM,gBAAkB,QACpBa,EAAA,uBAAyBC,EAAAA,mBAAmBd,EAAM,MAAM,EACxDa,EAAA,wBAA0BC,EAAAA,mBAAmBd,EAAM,MAAM,GAE7DA,EAAM,gBAAkB,SACpBa,EAAA,qBAAuBC,EAAAA,mBAAmBd,EAAM,MAAM,EACtDa,EAAA,wBAA0BC,EAAAA,mBAAmBd,EAAM,MAAM,GAE7DA,EAAM,gBAAkB,UACpBa,EAAA,oBAAsBC,EAAAA,mBAAmBd,EAAM,MAAM,EACrDa,EAAA,uBAAyBC,EAAAA,mBAAmBd,EAAM,MAAM,GAE5DA,EAAM,gBAAkB,WACpBa,EAAA,oBAAsBC,EAAAA,mBAAmBd,EAAM,MAAM,EACrDa,EAAA,qBAAuBC,EAAAA,mBAAmBd,EAAM,MAAM,IAM9DA,EAAM,MACLA,EAAM,gBAAkB,OACvBA,EAAM,gBAAkB,QACxBA,EAAM,gBAAkB,WAE1Ba,EAAM,IAAMC,EAAA,mBAAmBd,EAAM,IAAK,IAAI,GAK9CA,EAAM,QACLA,EAAM,gBAAkB,QACvBA,EAAM,gBAAkB,SACxBA,EAAM,gBAAkB,YAEpBa,EAAA,MAAQC,EAAAA,mBAAmBd,EAAM,KAAK,GAG5CA,EAAM,SACLA,EAAM,gBAAkB,OACvBA,EAAM,gBAAkB,UACxBA,EAAM,gBAAkB,YAEpBa,EAAA,OAASC,EAAAA,mBAAmBd,EAAM,MAAM,IAG5CA,EAAM,gBAAkB,QAAUA,EAAM,gBAAkB,UACxDA,EAAM,MACRa,EAAM,OAAS,eAAeC,EAAA,mBAAmBd,EAAM,IAAK,IAAI,CAAC,KAIrEa,EAAM,OAASV,EAAO,MAEfU,CAAA,CACR,EAEM,MAAA,CACL,GAAAZ,EACA,OAAAE,EACA,cAAAE,EACA,kBAAAK,EACA,kBAAAE,CAAA,CAEJ"}