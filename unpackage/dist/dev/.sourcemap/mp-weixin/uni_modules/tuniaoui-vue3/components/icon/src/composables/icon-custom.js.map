{"version":3,"file":"icon-custom.js","sources":["uni_modules/tuniaoui-vue3/components/icon/src/composables/icon-custom.ts"],"sourcesContent":["import { computed, toRef } from 'vue'\nimport { formatDomSizeValue, isEmpty } from '../../../../utils'\nimport { useNamespace } from '../../../../hooks/use-namespace'\nimport { useComponentColor } from '../../../../hooks/use-component-color'\nimport { useComponentSize } from '../../../../hooks/use-component-size'\n\nimport type { CSSProperties } from 'vue'\nimport type { IconProps } from '../icon'\n\nexport const useIcon = (props: IconProps) => {\n  const ns = useNamespace('icon')\n\n  // 解析图标颜色\n  const [colorClass, colorStyle, updateColor] = useComponentColor(\n    toRef(props, 'color'),\n    'text'\n  )\n  // 解析透明图标背景\n  const [transparentBgClass] = useComponentColor(toRef(props, 'transparentBg'), 'bg')\n  // 解析图标尺寸\n  const { sizeType } = useComponentSize(props.size)\n\n  // 判断是图片还是图鸟内置的图标\n  const isImg = computed<boolean>(\n    () => !!props?.name && props.name.includes('/')\n  )\n\n  // 图标对应的类名\n  const iconClass = computed<string>(() => {\n    const cls: string[] = []\n    cls.push(ns.b())\n    // 判断图标是否是图片\n    if (isImg.value) {\n      cls.push(ns.m('image'))\n    } else {\n      // 设置图标颜色类型\n      if (props.type) cls.push(`tn-type-${props.type}_text`)\n\n      // 判断是否设置透明图标背景\n      if (props.transparent) {\n        cls.push('tn-text-transparent', transparentBgClass.value)\n      } else {\n        // 设置图标颜色\n        if (colorClass.value) cls.push(colorClass.value)\n      }\n\n      // 设置图标加粗\n      if (props.bold) cls.push('tn-text-bold')\n    }\n\n    // 设置图标尺寸\n    if (sizeType.value === 'inner') cls.push(ns.m(props.size as string))\n\n    if (props.customClass) cls.push(props.customClass)\n    return cls.join(' ')\n  })\n\n  // 图标对应的样式\n  const iconStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n    // 判断图标是否是图片\n    if (isImg.value) {\n      // 如果设置了size，则设置图片的宽高\n      if (sizeType.value === 'custom' && props.size) {\n        style.width = style.height = formatDomSizeValue(props.size)\n      }\n    } else {\n      // 设置图标颜色\n      if (colorStyle.value) style.color = colorStyle.value\n\n      // 设置图标大小\n      if (sizeType.value === 'custom' && props.size)\n        style.fontSize = formatDomSizeValue(props.size)\n    }\n    // 设置垂直方向上的偏移量\n    if (props.offsetTop)\n      style.transform = `translateY(${formatDomSizeValue(props.offsetTop)})`\n\n    if (!isEmpty(props.customStyle)) Object.assign(style, props.customStyle)\n\n    return style\n  })\n\n  return {\n    isImg,\n    iconClass,\n    iconStyle,\n    updateColor,\n  }\n}\n"],"names":["useIcon","props","ns","useNamespace","colorClass","colorStyle","updateColor","useComponentColor","toRef","transparentBgClass","sizeType","useComponentSize","isImg","computed","iconClass","cls","iconStyle","style","formatDomSizeValue","isEmpty"],"mappings":"6XASaA,EAAWC,GAAqB,CACrC,MAAAC,EAAKC,eAAa,MAAM,EAGxB,CAACC,EAAYC,EAAYC,CAAW,EAAIC,EAAA,kBAC5CC,EAAA,MAAMP,EAAO,OAAO,EACpB,MAAA,EAGI,CAACQ,CAAkB,EAAIF,oBAAkBC,EAAAA,MAAMP,EAAO,eAAe,EAAG,IAAI,EAE5E,CAAE,SAAAS,CAAa,EAAAC,EAAA,iBAAiBV,EAAM,IAAI,EAG1CW,EAAQC,EAAA,SACZ,IAAM,CAAC,EAACZ,GAAA,MAAAA,EAAO,OAAQA,EAAM,KAAK,SAAS,GAAG,CAAA,EAI1Ca,EAAYD,EAAAA,SAAiB,IAAM,CACvC,MAAME,EAAgB,CAAA,EAClB,OAAAA,EAAA,KAAKb,EAAG,EAAG,CAAA,EAEXU,EAAM,MACRG,EAAI,KAAKb,EAAG,EAAE,OAAO,CAAC,GAGlBD,EAAM,MAAMc,EAAI,KAAK,WAAWd,EAAM,IAAI,OAAO,EAGjDA,EAAM,YACJc,EAAA,KAAK,sBAAuBN,EAAmB,KAAK,EAGpDL,EAAW,OAAWW,EAAA,KAAKX,EAAW,KAAK,EAI7CH,EAAM,MAAMc,EAAI,KAAK,cAAc,GAIrCL,EAAS,QAAU,SAASK,EAAI,KAAKb,EAAG,EAAED,EAAM,IAAc,CAAC,EAE/DA,EAAM,aAAiBc,EAAA,KAAKd,EAAM,WAAW,EAC1Cc,EAAI,KAAK,GAAG,CAAA,CACpB,EAGKC,EAAYH,EAAAA,SAAwB,IAAM,CAC9C,MAAMI,EAAuB,CAAA,EAE7B,OAAIL,EAAM,MAEJF,EAAS,QAAU,UAAYT,EAAM,OACvCgB,EAAM,MAAQA,EAAM,OAASC,EAAAA,mBAAmBjB,EAAM,IAAI,IAIxDI,EAAW,QAAOY,EAAM,MAAQZ,EAAW,OAG3CK,EAAS,QAAU,UAAYT,EAAM,OACjCgB,EAAA,SAAWC,EAAAA,mBAAmBjB,EAAM,IAAI,IAG9CA,EAAM,YACRgB,EAAM,UAAY,cAAcC,EAAAA,mBAAmBjB,EAAM,SAAS,CAAC,KAEhEkB,EAAAA,QAAQlB,EAAM,WAAW,GAAU,OAAA,OAAOgB,EAAOhB,EAAM,WAAW,EAEhEgB,CAAA,CACR,EAEM,MAAA,CACL,MAAAL,EACA,UAAAE,EACA,UAAAE,EACA,YAAAV,CAAA,CAEJ"}